{"ast":null,"code":"$(document).on('click', '#add-reading', function () {\n  add_new_reading();\n});\n$(document).on('click', '.delete-reading', function () {\n  var id = parseInt($(this).attr('id'));\n  $(\"#reading_details_\" + id).remove();\n  var count = parseInt($('#readings-count').val() - 1);\n  set_count(count);\n});\n\nfunction set_count(count) {\n  $('input[name=\"count\"]').val(count);\n}\n\nfunction add_new_reading() {\n  var count = parseInt($('#readings-count').val());\n\n  if (count > 3) {\n    alert(\"You can add only 4 readings per day!!!\");\n  } else {\n    add_new_reading_form();\n    set_count(count + 1);\n  }\n}\n\nfunction add_new_reading_form() {\n  $.ajax({\n    url: '/readings/new',\n    type: 'GET',\n    dataType: 'html',\n    success: function success(res) {\n      $('#new-readings').append(res);\n    }\n  });\n}\n\n$(document).on('click', '#save-readings', function (event) {\n  event.preventDefault();\n  remove_error_messages();\n  submit_form();\n});\n\nfunction remove_error_messages() {\n  $('small').empty();\n}\n\nfunction submit_form() {\n  var form_data = get_form_data();\n  $.ajax({\n    type: 'POST',\n    url: '/readings/save_daily_readings',\n    data: form_data,\n    success: function success(response) {\n      console.log('Readings saved successfully');\n    },\n    error: function error(request, status, _error) {\n      var errors = request.responseJSON;\n      add_error_messages(errors);\n    }\n  });\n}\n\nfunction add_error_messages(errors) {\n  check_daily_limit_error(errors);\n  $.each(errors, function (id, reading) {\n    $.each(reading, function (key, error) {\n      $(\"#\" + key + \"_error_\" + id).append(error);\n    });\n  });\n}\n\nfunction check_daily_limit_error(errors) {\n  if (errors['daily_limit']) {\n    alert(\"You can add only 4 readings per day!!!\");\n  }\n\n  delete errors['daily_limit'];\n}\n\nfunction get_form_data() {\n  var form_data = {};\n  $.each($('#daily-readings').serializeArray(), function (_, kv) {\n    form_data[kv.name] = kv.value;\n  });\n  return form_data;\n}","map":{"version":3,"sources":["/home/teja-rvs/clearstack/sweety_docs/app/javascript/packs/daily_readings.js"],"names":["$","document","on","add_new_reading","id","parseInt","attr","remove","count","val","set_count","alert","add_new_reading_form","ajax","url","type","dataType","success","res","append","event","preventDefault","remove_error_messages","submit_form","empty","form_data","get_form_data","data","response","console","log","error","request","status","errors","responseJSON","add_error_messages","check_daily_limit_error","each","reading","key","serializeArray","_","kv","name","value"],"mappings":"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","sourcesContent":["$(document).on('click', '#add-reading', function () {\n    add_new_reading();\n});\n\n$(document).on('click', '.delete-reading', function () {\n    var id = parseInt($(this).attr('id'))\n    $(\"#reading_details_\" + id).remove();\n    var count = parseInt($('#readings-count').val() - 1);\n    set_count(count);\n})\n\nfunction set_count(count) {\n    $('input[name=\"count\"]').val(count);\n}\n\nfunction add_new_reading() {\n    var count = parseInt($('#readings-count').val());\n    if (count > 3) {\n        alert(\"You can add only 4 readings per day!!!\");\n    }\n    else {\n        add_new_reading_form();\n        set_count(count + 1);\n    }\n}\n\nfunction add_new_reading_form() {\n    $.ajax({\n        url: '/readings/new',\n        type: 'GET',\n        dataType: 'html',\n        success: function (res) {\n            $('#new-readings').append(res);\n        }\n    });\n}\n\n$(document).on('click', '#save-readings', function (event) {\n    event.preventDefault();\n    remove_error_messages();\n    submit_form();\n});\n\nfunction remove_error_messages() {\n    $('small').empty();\n}\n\nfunction submit_form() {\n    var form_data = get_form_data();\n    $.ajax({\n        type: 'POST',\n        url: '/readings/save_daily_readings',\n        data: form_data,\n        success: function (response) {\n            console.log('Readings saved successfully')\n        },\n        error: function (request, status, error) {\n            var errors = request.responseJSON;\n            add_error_messages(errors);\n        }\n    });\n}\n\nfunction add_error_messages(errors) {\n    check_daily_limit_error(errors);\n    $.each(errors, function (id, reading) {\n        $.each(reading, function (key, error) {\n            $(\"#\" + key + \"_error_\" + id).append(error);\n        });\n    });\n}\n\nfunction check_daily_limit_error(errors) {\n    if (errors['daily_limit']) {\n        alert(\"You can add only 4 readings per day!!!\");\n    }\n    delete errors['daily_limit'];\n}\n\nfunction get_form_data() {\n    var form_data = {};\n    $.each($('#daily-readings').serializeArray(), function (_, kv) {\n        form_data[kv.name] = kv.value;\n    });\n    return form_data;\n}"]},"metadata":{},"sourceType":"module"}